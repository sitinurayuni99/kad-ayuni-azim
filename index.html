<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ayuni & Azim - Kad Jemputan</title>
  <link rel="stylesheet" href="style.css" />
  <script defer src="script.js"></script>
  <style>
    .popup {
      position: fixed;
      top: 50%;
      left: 50%;
      background: #fff;
      padding: 25px;
      border-radius: 10px;
      transform: translate(-50%, -50%);
      box-shadow: 0 0 15px rgba(0,0,0,0.3);
      z-index: 9999;
      max-width: 400px;
      width: 90%;
    }

    .popup-content input,
    .popup-content select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    .popup-content button {
      padding: 10px 20px;
      margin-right: 10px;
      margin-top: 10px;
    }

    .close {
      float: right;
      font-size: 24px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="kad-container">
    <h1>Ayuni & Azim</h1>
    <p class="tarikh">7 September 2025</p>
    <p class="ayat">Dengan penuh kesyukuran, kami menjemput anda ke majlis perkahwinan kami.</p>

    <div class="info">
      <p><strong>Lokasi:</strong><br>
      Lot 3238 B, Jalan Khalifah Zakaria, Kg Paya Jaras Dalam, 47000 Sg Buloh, Selangor</p>
      <a href="https://maps.app.goo.gl/BeboTh1RUroysBrE6" target="_blank" class="butang">Lihat Lokasi</a>
    </div>

    <div class="countdown">
      <h2>Kira detik ke hari bahagia:</h2>
      <div id="counter">Loading...</div>
    </div>

    <button class="butang" onclick="openRSVP()">Sahkan Kehadiran (RSVP)</button>
  </div>

  <!-- Popup RSVP -->
  <div id="popupRSVP" class="popup" style="display:none;">
    <div class="popup-content">
      <span onclick="closeRSVP()" class="close">&times;</span>
      <h3>Sila Sahkan Kehadiran</h3>
      <form id="rsvpForm">
        <label>Nama:</label><br>
        <input type="text" name="nama" required><br><br>

        <label>Kehadiran:</label><br>
        <select name="kehadiran" required>
          <option value="">-- Pilih --</option>
          <option value="Hadir">Hadir</option>
          <option value="Tidak Hadir">Tidak Hadir</option>
        </select><br><br>

        <button type="submit">Hantar</button>
        <button type="button" onclick="closeRSVP()">Tutup</button>
      </form>

      <div id="rsvpSuccess" style="display:none; margin-top: 15px;">âœ… Terima kasih! Kehadiran anda telah direkodkan.</div>
    </div>
  </div>

  <!-- Muzik -->
  <audio autoplay loop>
    <source src="assets/beautiful-in-white-instrumental.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <!-- RSVP + Countdown Script -->
  <script>
    const webhookURL = "https://script.google.com/macros/s/AKfycbxd8L7Zp11j3w5RVJUva8saaiiMd7KUV_g2b78sINOFFFVbwKgX_iaBIJ_kpSR6kH4H7A/exec";

    function openRSVP() {
      document.getElementById("popupRSVP").style.display = "block";
    }

    function closeRSVP() {
      document.getElementById("popupRSVP").style.display = "none";
      document.getElementById("rsvpForm").style.display = "block";
      document.getElementById("rsvpSuccess").style.display = "none";
    }

    document.getElementById("rsvpForm").onsubmit = function (e) {
      e.preventDefault();
      const nama = this.nama.value;
      const kehadiran = this.kehadiran.value;

      fetch(webhookURL, {
        method: "POST",
        body: JSON.stringify({ nama, kehadiran }),
        headers: { "Content-Type": "application/json" }
      })
      .then(() => {
        this.style.display = "none";
        document.getElementById("rsvpSuccess").style.display = "block";
      })
      .catch(() => {
        alert("Maaf, ada masalah. Sila cuba lagi.");
      });
    };

    // Countdown
    const countdown = () => {
      const eventDate = new Date("2025-09-07T00:00:00").getTime();
      const now = new Date().getTime();
      const diff = eventDate - now;

      if (diff < 0) {
        document.getElementById("counter").innerText = "Majlis telah berlangsung.";
        return;
      }

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      const minutes = Math.floor((diff / (1000 * 60)) % 60);
      const seconds = Math.floor((diff / 1000) % 60);

      document.getElementById("counter").innerText = `${days} hari ${hours} jam ${minutes} minit ${seconds} saat`;
    };

    setInterval(countdown, 1000);
  </script>
</body>
</html>
